streams and buffer

https://github.com/copilot/c/a49bb18b-3ae2-4881-84fe-4bf5314bc358
